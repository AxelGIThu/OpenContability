{% extends 'base.html' %}
{% load custom_tags %}
{% block title %}OpenContability - Tabla Facturas{% endblock %}
{% load static %}

{% block head_extra %}
    <link rel="stylesheet" href="{% static 'styles/tablas_facturas.css' %}">
    <link rel="shortcut icon" href="{% static 'media/oc_logo.ico' %}" type="image/x-icon">
{% endblock %}
{% block content %}

    <h1>Tabla Facturas</h1>

    {% if facturas %} 

        <table class="clase_tabla" border="1">
            <thead>
                {% for columna in columnas %}
                    <th>{{ columna }}</th>
                {% endfor %}
                <th colspan="2">Opciones</th>
            </thead>
            <tbody>
                {% for factura in facturas %}
                <tr>
                    {% for columna in columnas%}    
                            <td>{{ factura|get_attr:columna }}</td>
                    {% endfor%}
                    <td><a href="{% url 'modificar_facturas' factura.NFactura %}">Modificar</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <a class="anchor" href="tabla_facturas">Atras</a>
    {% else %}
    <h2>Elija que campos quiere ver.</h2>
        <div class="form_container">
            <form id="formulario_container" action="tabla_facturas" method="post">
                {% csrf_token %}
                <div class="checkbox-grid">
                    <label><input type="checkbox" name="filtro_campos" value="NFactura" checked> Numero de Factura</label>
                    <label><input type="checkbox" name="filtro_campos" value="Movimiento" checked> Movimiento</label>
                    <label><input type="checkbox" name="filtro_campos" value="Comprobante" checked> Comprobante</label>
                    <label><input type="checkbox" name="filtro_campos" value="Procesamiento" checked> Procesamiento</label>
                    <label><input type="checkbox" name="filtro_campos" value="TComprobante"> Tipo de Comprobante</label>
                    <label><input type="checkbox" name="filtro_campos" value="TImputacion"> Tipo de Imputacion</label>
                    <label><input type="checkbox" name="filtro_campos" value="Empresa" checked> Empresa</label>
                    <label><input type="checkbox" name="filtro_campos" value="Cliente" checked> Cliente</label>
                    <label><input type="checkbox" name="filtro_campos" value="Neto10y5"> Neto 10y5%</label>
                    <label><input type="checkbox" name="filtro_campos" value="IVA10y5"> IVA 10y5%</label>
                    <label><input type="checkbox" name="filtro_campos" value="Neto21"> Neto 21%</label>
                    <label><input type="checkbox" name="filtro_campos" value="IVA21"> IVA 21%</label>
                    <label><input type="checkbox" name="filtro_campos" value="Neto27"> Neto 27%</label>
                    <label><input type="checkbox" name="filtro_campos" value="IVA27"> IVA 27%</label>
                    <label><input type="checkbox" name="filtro_campos" value="ConceptoNoAgrabado"> Conceptos No Agrabado</label>
                    <label><input type="checkbox" name="filtro_campos" value="PercepcionIVA"> Percepciones IVA</label>
                    <label><input type="checkbox" name="filtro_campos" value="PercepcionDGR"> Percepciones DGR</label>
                    <label><input type="checkbox" name="filtro_campos" value="PercepcionMunicipalidad"> Percepciones Municipalidad</label>
                    <label><input type="checkbox" name="filtro_campos" value="Otros"> Otros</label>
                    <label><input type="checkbox" name="filtro_campos" value="Total" checked> Totales</label>
                </div>

                <br>
                <div class="estilo_boton-container">
                    <button type="submit">Mostrar Tabla</button>
                </div>    
            </form>
    {% endif %}
{% endblock  %}